<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Muro - Calculadora</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="css/style.css">
<style>
.header {background: #1f2937;color: white;padding: 1rem;text-align: center;position: sticky;top: 0;z-index: 1000;box-shadow: 0 2px 6px rgba(0,0,0,0.1);}
.nav-menu {display: flex;flex-wrap: wrap;gap: 0.5rem;justify-content: center;margin-top: 0.5rem;}
.nav-link {background: #f0f0f0;color: #1f2937;padding: 0.5rem 1rem;border-radius: 10px;text-decoration: none;font-weight: 500;font-size: 0.95rem;box-shadow: 2px 2px 5px rgba(0,0,0,0.08), -2px -2px 5px rgba(255,255,255,0.7);transition: all 0.15s ease;}
.nav-link:hover {transform: translateY(-1px);box-shadow: 1px 1px 3px rgba(0,0,0,0.1), -1px -1px 3px rgba(255,255,255,0.8);background: #e8e8e8;}
.container {max-width: 900px;margin: 2rem auto;padding: 0 1rem;}
.card {background: #fff;padding: 1rem;margin-bottom: 1rem;border-radius: 14px;box-shadow: 0 4px 8px rgba(0,0,0,0.05);}
.card label {font-weight: 500;}
.card input, .card select {width: 100%;padding: 0.5rem;margin-top: 0.2rem;border-radius: 8px;border: 1px solid #ccc;}
.btn-primary {display: block;margin: 1rem auto;padding: 0.7rem 2rem;background-color: #1f2937;color: white;border: none;border-radius: 10px;font-size: 1rem;cursor: pointer;transition: 0.2s;}
.btn-primary:hover {background-color: #374151;}
.result {background: #f9f9f9;padding: 1rem;border-radius: 12px;margin-top: 1rem;box-shadow: 0 2px 6px rgba(0,0,0,0.05);}
footer {text-align: center;padding: 1rem;margin-top: 2rem;color: #6b7280;font-size: 0.9rem;}
</style>
</head>
<body>

<header class="header">
<h1>Calculadora de Muros</h1>
<nav class="nav-menu">
    <a href="index.html" class="nav-link">Inicio</a>
    <a href="muro.html" class="nav-link">Muro</a>
    <a href="piso.html" class="nav-link">Piso</a>
    <a href="cubierta.html" class="nav-link">Cubierta</a>
    <a href="cimentacion.html" class="nav-link">Cimentación</a>
    <a href="estructura.html" class="nav-link">Estructura</a>
    <a href="falso-techo.html" class="nav-link">Falso Techo</a>
    <a href="pintura.html" class="nav-link">Pintura</a>
</nav>
</header>

<main class="container">

<!-- Selección tipo muro -->
<div class="card">
    <label>Tipo de muro</label>
    <select id="tipoMuro">
        <option value="">-- Selecciona tipo --</option>
        <option value="bloque">Bloque</option>
        <option value="ladrillo">Ladrillo</option>
        <option value="hormigonArmado">Hormigón armado</option>
    </select>
</div>

<!-- Dimensiones -->
<div class="card">
    <label>Largo del muro (m)</label>
    <input type="number" id="largo" placeholder="Largo del muro">
</div>
<div class="card">
    <label>Ancho del muro (m)</label>
    <input type="number" id="ancho" placeholder="Ancho del muro">
</div>
<div class="card">
    <label>Área del muro (m²)</label>
    <input type="number" id="area" readonly>
</div>

<!-- Cemento y dosificación -->
<div class="card">
    <label>Tipo de cemento</label>
    <select id="tipoCemento">
        <option value="P250">P-250</option>
        <option value="P350">P-350</option>
    </select>
</div>
<div class="card">
    <label>Dosificación</label>
    <select id="dosificacion">
        <option value="1:3:1">1:3:1</option>
        <option value="1:4:1">1:4:1</option>
        <option value="1:2:1">1:2:1</option>
    </select>
</div>

<button class="btn-primary" onclick="calcularMuro()">Calcular</button>
<button class="btn-primary" style="background:#ef4444;" onclick="borrarCal()">Borrar</button>

<div id="resultado" class="result" style="display:none;"></div>

<footer>Arq. Emanuel Silva Riambaut</footer>

<script>
// Cargar precios
let precios = JSON.parse(localStorage.getItem('precios'))||{};

// Calcular área automáticamente
document.getElementById('largo').addEventListener('input', actualizarArea);
document.getElementById('ancho').addEventListener('input', actualizarArea);
function actualizarArea(){
    const largo = parseFloat(document.getElementById('largo').value) || 0;
    const ancho = parseFloat(document.getElementById('ancho').value) || 0;
    document.getElementById('area').value = (largo*ancho).toFixed(2);
}

function calcularMuro(){
    const tipo = document.getElementById('tipoMuro').value;
    const area = parseFloat(document.getElementById('area').value)||0;
    const cemento = document.getElementById('tipoCemento').value;
    const dosi = document.getElementById('dosificacion').value;
    if(!tipo || area<=0){alert("Complete todos los datos"); return;}

    let resumen = `<h3>Resumen de ${tipo}</h3>`;
    let totalCUP=0;

    // Materiales
    if(tipo==='bloque'){
        const precioBloque = precios['bloque']||0;
        const cantidadBloque = area*10; // ej: 10 bloques por m²
        const costoBloque = cantidadBloque*precioBloque;
        totalCUP+=costoBloque;
        resumen+=`<p>Bloques: ${cantidadBloque} unidades (Precio: ${costoBloque.toFixed(2)} CUP)</p>`;
    } else if(tipo==='ladrillo'){
        const precioLadrillo = precios['ladrillo']||0;
        const cantidadLadrillo = area*50; // 50 ladrillos por m²
        const costoLadrillo = cantidadLadrillo*precioLadrillo;
        totalCUP+=costoLadrillo;
        resumen+=`<p>Ladrillos: ${cantidadLadrillo} unidades (Precio: ${costoLadrillo.toFixed(2)} CUP)</p>`;
    } else if(tipo==='hormigonArmado'){
        const espesor = 0.15;
        const volumen = area*espesor;
        const precioHorm = precios['hormigonArmado']||0;
        const varilla = area*2; // m lineales aprox
        const precioVarilla = varilla*(precios['acero']||0);
        totalCUP+=volumen*precioHorm + precioVarilla;
        resumen+=`<p>Hormigón armado: ${volumen.toFixed(2)} m³ (Precio: ${(volumen*precioHorm).toFixed(2)} CUP)</p>`;
        resumen+=`<p>Varilla: ${varilla.toFixed(2)} m (Precio: ${precioVarilla.toFixed(2)} CUP)</p>`;
    }

    // Repello
    const cementoRep = precios[cemento]||0;
    const arenaRep = precios['arena']||0;
    const repello = area*0.01; // m³ aprox
    const costoRep = repello*(cementoRep+arenaRep);
    totalCUP+=costoRep;
    resumen+=`<p>Repello: ${repello.toFixed(2)} m³ (Precio: ${costoRep.toFixed(2)} CUP)</p>`;

    // Fino
    const fino = area*0.005;
    const costoFino = fino*(cementoRep+arenaRep);
    totalCUP+=costoFino;
    resumen+=`<p>Fino: ${fino.toFixed(2)} m³ (Precio: ${costoFino.toFixed(2)} CUP)</p>`;

    // Resumen general
    resumen+=`<p><strong>Total materiales:</strong> ${totalCUP.toFixed(2)} CUP | ${(totalCUP/(precios['usd']||1)).toFixed(2)} USD | ${(totalCUP/(precios['eur']||1)).toFixed(2)} EUR</p>`;

    // Mano de obra
    let albañiles = area>100?1:1;
    let ayudantes = area>100?2:1;
    let tiempo = area/10; // días aprox
    resumen+=`<p>Albañiles: ${albañiles}, Ayudantes: ${ayudantes}, Tiempo estimado: ${tiempo.toFixed(1)} días</p>`;

    document.getElementById('resultado').style.display='block';
    document.getElementById('resultado').innerHTML = resumen;

    // Guardar área para pintura
    let areas = JSON.parse(localStorage.getItem('areasCalculadas'))||{};
    areas['muros'] = area;
    localStorage.setItem('areasCalculadas', JSON.stringify(areas));
}

function borrarCal(){
    document.getElementById('tipoMuro').value='';
    document.getElementById('largo').value='';
    document.getElementById('ancho').value='';
    document.getElementById('area').value='';
    document.getElementById('tipoCemento').value='P250';
    document.getElementById('dosificacion').value='1:3:1';
    document.getElementById('resultado').style.display='none';
}
</script>

</body>
</html>
